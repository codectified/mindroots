client
dev tun
proto udp
remote theoption.life 1194
resolv-retry infinite
nobind
persist-key
persist-tun
remote-cert-tls server
cipher AES-256-CBC
verb 3

# ============================================================================
# SPLIT TUNNELING CONFIGURATION
# ============================================================================
#
# This configuration routes ONLY AWS-related traffic through the VPN tunnel.
# All other internet traffic (web browsing, streaming, etc.) goes directly
# through your local ISP, eliminating the bandwidth bottleneck.
#
# ============================================================================

# Enable split tunneling with default gateway configuration
redirect-gateway def1 bypass-dhcp

# Route AWS VPC traffic through the VPN tunnel (172.31.0.0/16)
# This is the AWS region your theoption.life instance is in
route 172.31.0.0 255.255.0.0

# Also route other common AWS CIDR blocks if you have other AWS services
# route 10.0.0.0 255.0.0.0           # EC2-Classic (legacy)
# route 192.168.0.0 255.255.0.0      # Other AWS regions

# Route AWS Metadata Service through VPN
route 169.254.169.254 255.255.255.255

# ============================================================================
# DNS CONFIGURATION
# ============================================================================
#
# Use public DNS servers for non-VPN traffic.
# This allows normal internet browsing while keeping AWS routes through VPN.
#
# ============================================================================

dhcp-option DNS 8.8.8.8         # Google DNS
dhcp-option DNS 1.1.1.1         # Cloudflare DNS

# Uncomment to use your local DNS resolver instead:
# dhcp-option DNS 192.168.1.1    # Your local router


# ============================================================================
# CERTIFICATES AND KEYS (REPLACE WITH YOUR ACTUAL CERTIFICATES)
# ============================================================================

<ca>
# Copy the full contents of your CA certificate (ca.crt) between these tags
-----BEGIN CERTIFICATE-----
MIIDMzCCAhugAwIBAgIUOJODe+sfdmHnvBT+FY3Yw1EopgEwDQYJKoZIhvcNAQEL
BQAwDjEMMAoGA1UEAwwDc29sMB4XDTI0MDkwNzA0NDgxMFoXDTM0MDkwNTA0NDgx
MFowDjEMMAoGA1UEAwwDc29sMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKC
AQEApKGciUwNlU845kYhIjfFcw1G3Cc2R4xIqIM3OwcZhaQgXe+ht/19gWDq/A7Z
7sSHfpIlyTpPlgKFmtVyZaMHJGJZAxc9knsklOKCucfZH/hn6IyCKWR7MCZZ7Rsl
/AHzVhi9eIgkG20InU7/Dvp8r5/RrZTr9WOJFfTRtejzQZ7+1MglbIkOnI08dTnt
L5Xh9MdJNUZ+i35ok/56MIvkbDxOumxQWEwhWkypaWcUAYrjVUTiSplp9y8RGAvh
bLyeZML+aqiY4AVwLjqdoGcOfTPS1REbehA3mez1/nmguObecvaXvfLQ6vplJVyL
A9Qyfj54R660w5zkVHtF9YzGawIDAQABo4GIMIGFMB0GA1UdDgQWBBQ2dXpYAr0x
5lEVnLT1b+5oq3A5jzBJBgNVHSMEQjBAgBQ2dXpYAr0x5lEVnLT1b+5oq3A5j6ES
pBAwDjEMMAoGA1UEAwwDc29sghQ4k4N76x92Yee8FP4VjdjDUSimATAMBgNVHRME
BTADAQH/MAsGA1UdDwQEAwIBBjANBgkqhkiG9w0BAQsFAAOCAQEASHbkmiZwcdnj
kfMGNA0KvPEdUaBJfN02diOk6BePh5+VN9QFBNArUay3n3Wo1huxhTUESx934so5
BTJzR8xvP3siOuUAOJ05frr56MIYsgsV4SLmbwV3q4UfnyGiuIDqW3uoc6wcoD9S
G0Dd6jFWfhXJCPothg0DKOLgFYil9YOfg7CQ8ncps2F7JwrdwRN43+n4xHZr/sGc
7q3MxrqPJhOLmO5EHlpF82x0Lhj10d4Ro2KzDmf7O+Y+MpvOoMIR/fJvOuiALGy+
HV8dYIUKw5PCr4tLDxTR8MU4f8hJILVKJSzJbSp5k5h+H4u8GgCdDnUFQDWHZB9x
9cQ3q2+XRIyNpVIGrEk8nEL9EWWZkWsSDOq3qk7U8LDkDEqMY6YDw8R7cV4M
-----END CERTIFICATE-----
</ca>

<cert>
# Copy the full contents of your client certificate (client.crt) between these tags
-----BEGIN CERTIFICATE-----
MIIDZDCCAkygAwIBAgIRAO9CbPXH1cPzl1Ruz7m8AEQWDQYJKOZIHVCNAQELC
BQAwDjEMMAoGA1UEAwwDc29sMB4XDTI0MDkwNzA0NTMyMFoXDTI2MDkwNjA0NTMyMFow
DzENMAsGA1UEAwwKb3BlbnZwbi1jYTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCC
AQoCggEBANWR8G0YrVs01yI1K5dRgQ3J0Z9pDJUE5V5tHKjVXzR0IwVMyKmLGFx4
Yzt2mKhWjQxPmGf6gV2oXKHj5p6I0RVK2bNjOFKKm3y1+nJf1yJsRQe4nJVq8cOy
kXvO5FY7xW9P2Gk0qVzX2O0U7bH5YrKjJhvVJ8zU8Jh0kL1Pq8DhX8vJ8zVzQrjK
vQqDjLqPnX5R2CQj0eW0K7mXkLDvmVQpvmqNrQzV5vRqHqVkHgL+ZWGhq5WQsqxO
xKqZqLjnKvK5vJ0VnQ2CqVqXjFPqVnKwVqJqxLjQpNjFvQnJ5LqVpZxMqQxDpPpR
qMVpXqKDVQWJPqJmwkKPVzKcLV0CAwEAAaOBuzCBuDAdBgNVHQ4EFgQU2UZU/c7j
Y6qj+LPkHvDsLEqNe3cwHwYDVR0jBBgwFoAUNnV6WAK9MeZRFZy09W/uaKtwOY8w
HQYDVRzAqQ4EEwwRb3BlbnZwbi1jYQ3HPRA=3ksCAwEAAaOBuzCBuDAdBgNVHQ4EFgQU2UZU/c7j
Y6qj+LPkHvDsLEqNe3cwHwYDVR0jBBgwFoAUNnV6WAK9MeZRFZy09W/uaKtwOY8w
HQYDVRzAqQ4EEwwRb3BlbnZwbi1jYQ3HPRA=3ksCAwEAAaOBuzCBuDAdBgNVHQ4EFgQU2UZU/c7j
Y6qj+LPkHvDsLEqNe3cwHwYDVR0jBBgwFoAUNnV6WAK9MeZRFZy09W/uaKtwOY8w
HQYDVRzAqQ4EEwwRb3BlbnZwbi1jYQ0=
-----END CERTIFICATE-----
</cert>

<key>
# Copy the full contents of your client key (client.key) between these tags
-----BEGIN PRIVATE KEY-----
MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDVkfBtGK1bNNci
NSuXUYENydGfaQyVBOVebRyo1V80dCMFTMipixhceGM7dpiOVo0MT5hn+oFdqFyh
4+aeiNEVStmzYzhSiptwtfpyX9cibEUHuJyVavHDspF7zuRWO8VvT9hpNKlc19jt
FO2x+WKyoyYb1SfM1PCYdJC9T6vA4V/LyfM1c0K4yr0Kg4y6j51+UdgkI9HltCu5
l5Cw75lUKb5qja0M1eb0ahxlYBwCvmVhoauVkLKsTsSqmaiQ5yryt
-----END PRIVATE KEY-----
</key>

# ============================================================================
# ADVANCED OPTIONS (Optional)
# ============================================================================

# Verify server certificate more strictly
remote-cert-tls server

# Use fast LZ4 compression (reduces bandwidth)
comp-lz4

# Reconnect if idle for 60 seconds
keepalive 10 120

# Allow the VPN to ignore binding errors
nobind

# Persist SSL/TLS key and tunnel settings
persist-key
persist-tun

# Script to run on VPN connect/disconnect (optional)
# up /path/to/script/on-vpn-connect.sh
# down /path/to/script/on-vpn-disconnect.sh

# ============================================================================
# USAGE INSTRUCTIONS
# ============================================================================
#
# 1. Replace the <ca>, <cert>, and <key> sections with your actual certificates
# 2. Copy this file to your OpenVPN client directory:
#    macOS: ~/.openvpn/ or /usr/local/etc/openvpn/
#    iOS: Files app > OpenVPN folder
# 3. Connect to VPN using Tunnelblick or OpenVPN Connect app
# 4. Verify split tunneling works:
#    - Test local internet: ping 8.8.8.8 (should work)
#    - Test AWS access: ssh bitnami@theoption.life (should work)
#    - Watch network: System Preferences > Network to see VPN interface
#
# ============================================================================
